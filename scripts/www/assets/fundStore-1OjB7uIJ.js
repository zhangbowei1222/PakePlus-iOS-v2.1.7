import{z as P,h as s,i as d}from"./index-Mrxc-rM3.js";import{s as x}from"./data-B6_LO-0g.js";const M=P("fund",()=>{const t=s([]),o=s([]),n=s([]),i=s([]),r=s([]),c={holdFunds:[],marketIndices:[{name:"上证指数",value:3245.86,change:.82,trend:[3220,3225,3218,3230,3228,3235,3240,3238,3242,3245]},{name:"深证成指",value:10533.68,change:1.05,trend:[10480,10490,10475,10500,10510,10505,10520,10515,10530,10533]},{name:"创业板指",value:2128.97,change:-.23,trend:[2135,2130,2128,2132,2130,2125,2127,2129,2127,2128]}],favoriteFunds:[{code:"005918",name:"易方达均衡精选混合",estimateNav:1.6842,yesterdayNav:1.653,change:1.86},{code:"161725",name:"招商中证白酒指数",estimateNav:1.4258,yesterdayNav:1.401,change:2.45},{code:"003095",name:"中欧医疗健康混合A",estimateNav:2.458,yesterdayNav:2.402,change:2.33}]},u=d(()=>t.value.reduce((e,a)=>e+(a.dayProfit||0),0).toFixed(2)),h=d(()=>t.value.reduce((e,a)=>e+(a.holdAmount||0),0).toFixed(2)),m=d(()=>t.value.reduce((e,a)=>e+(a.holdProfit||0),0).toFixed(2)),F=()=>{t.value.length===0&&(t.value=c.holdFunds),o.value.length===0&&(o.value=c.favoriteFunds||[]),n.value.length===0&&(n.value=c.marketIndices)},y=async e=>{if(!e){r.value=[];return}try{const a=await x(e);a.Datas&&(r.value=a.Datas.map(l=>({code:l.CODE,name:l.NAME,type:l.TYPE})))}catch(a){console.error("搜索基金失败:",a),r.value=[]}},g=e=>{if(v(e.code)){alert("该基金已在自选列表中！");return}o.value.push({code:e.code,name:e.name,estimateNav:(1+Math.random()*.5).toFixed(4),yesterdayNav:(1+Math.random()*.5-.1).toFixed(4),change:(Math.random()-.4)*3})},N=e=>{o.value=o.value.filter(a=>a.code!==e)},f=()=>{confirm("确定清空自选基金？")&&(o.value=[])},v=e=>o.value.some(a=>a.code===e),p=()=>{t.value.forEach(e=>{e.change=(Math.random()-.4)*3,e.changeValue=e.change/100*e.yesterdayNav,e.estimateNav=e.yesterdayNav+e.changeValue,e.dayProfit=e.changeValue*e.holdShare,e.holdProfit=(e.estimateNav-e.costPrice)*e.holdShare,e.holdAmount=e.estimateNav*e.holdShare}),alert("数据已刷新！")},A=e=>{t.value.push(e)},D=()=>{confirm("确定重置所有本地数据？")&&(t.value=[],o.value=[],n.value=[],i.value=[],r.value=[],location.reload())};return F(),{holdFunds:t,favoriteFunds:o,marketIndices:n,searchResults:r,totalProfit:u,totalAssets:h,totalEarnings:m,searchFunds:y,addToFavorites:g,removeFromFavorites:N,clearFavorites:f,isFavorite:v,refreshHoldData:p,resetData:D,addHoldFund:A}},{persist:{key:"fundStore",paths:["holdFunds","favoriteFunds"]}});export{M as u};
