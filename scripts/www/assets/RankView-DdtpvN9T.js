import{h as k,C as R,o as j,b as d,c as u,d as e,F as y,r as _,t as n,u as x,n as b,i as C,j as A}from"./index-Mrxc-rM3.js";import{u as M}from"./fundStore-1OjB7uIJ.js";import{b as P,f as S,a as B,c as $,g as W}from"./format-DZ_smWHi.js";import"./auto-fjZFdS-c.js";import"./data-B6_LO-0g.js";function z(){const r=k({});return{createMiniChart:(a,i,f)=>{const v=document.getElementById(a);if(!v)return null;r.value[a]&&r.value[a].destroy();const c=v.getContext("2d"),m=new R(c,{type:"line",data:{labels:i.map((p,l)=>l),datasets:[{data:i,borderColor:f,backgroundColor:"transparent",borderWidth:1,tension:.4,fill:!1,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1},y:{display:!1}}}});return r.value[a]=m,m},createFundChart:(a,i,f,v)=>{const c=document.getElementById(a);if(!c)return null;r.value[a]&&r.value[a].destroy();const m=c.getContext("2d"),p=new R(m,{type:"line",data:{labels:i,datasets:[{label:"单位净值",data:f,borderColor:"#165DFF",backgroundColor:"transparent",borderWidth:2,tension:.4,fill:!1,pointRadius:0,pointHoverRadius:4,pointHoverBackgroundColor:"#165DFF"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(255,255,255,0.95)",titleColor:"#1D2129",bodyColor:"#1D2129",borderColor:"#E5E6EB",borderWidth:1,callbacks:{label:function(l){return`净值: ${l.parsed.y.toFixed(4)}`}}}},scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:10,color:"#86909C",font:{size:11}}},y:{grid:{color:"#F2F3F5"},ticks:{color:"#86909C",callback:function(l){return l.toFixed(4)}}}},interaction:{intersect:!1,mode:"index"}}});return r.value[a]=p,p},destroyChart:a=>{r.value[a]&&(r.value[a].destroy(),delete r.value[a])},chartInstances:r}}const H={class:"page-content page-transition"},L={class:"bg-white rounded-xl p-4 card-shadow mb-6"},N={class:"scroll-container flex space-x-4 pb-2"},V={class:"flex justify-between items-start mb-2"},q={class:"text-neutral text-xs"},G={class:"text-lg font-bold"},I={class:"mini-chart-container"},J=["id"],K={class:"bg-white rounded-lg p-3 card-shadow hover-scale index-card"},O={class:"flex justify-between items-start mb-2"},Q={class:"text-lg font-bold"},U={class:"flex items-center text-neutral text-xs"},X={class:"bg-white rounded-xl p-4 card-shadow mb-6"},Y={class:"flex justify-between items-center mb-4"},Z={class:"flex space-x-2"},ee=["onClick"],te={class:"space-y-3"},se=["onClick"],ae={class:"flex-1"},ne={class:"flex justify-between"},oe={class:"font-medium text-sm"},re={class:"text-xs text-neutral"},le={class:"bg-white rounded-xl p-4 card-shadow"},ie={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},ge={__name:"RankView",setup(r){const F=A(),h=M(),{createMiniChart:w}=z(),a=k("rise"),i=k(""),f=[{id:"rise",name:"涨幅榜"},{id:"fall",name:"跌幅榜"}],v=["股票型","混合型","债券型","指数型"],c=C(()=>h.marketIndices&&h.marketIndices.length>0?h.marketIndices:[{name:"上证指数",value:3245.86,change:.82,trend:[3220,3225,3218,3230,3228,3235,3240,3238,3242,3245]},{name:"深证成指",value:10533.68,change:1.05,trend:[10480,10490,10475,10500,10510,10505,10520,10515,10530,10533]},{name:"创业板指",value:2128.97,change:-.23,trend:[2135,2130,2128,2132,2130,2125,2127,2129,2127,2128]}]),m=C(()=>{const o=[{code:"320007",name:"诺安成长混合",type:"混合型",change:3.25,nav:1.8652},{code:"003095",name:"中欧医疗健康混合A",type:"混合型",change:2.87,nav:2.458},{code:"260108",name:"景顺长城新兴成长混合",type:"混合型",change:2.63,nav:3.2865},{code:"161005",name:"富国天惠精选成长A",type:"混合型",change:2.18,nav:2.9872},{code:"005827",name:"易方达蓝筹精选混合",type:"混合型",change:1.95,nav:1.5638},{code:"000001",name:"华夏成长混合",type:"混合型",change:-1.25,nav:1.0256},{code:"001184",name:"易方达新常态混合",type:"混合型",change:-1.83,nav:.8652},{code:"000969",name:"前海开源中证军工",type:"混合型",change:-2.15,nav:.9875}];return a.value==="rise"?o.sort((s,t)=>t.change-s.change).filter(s=>s.change>0):o.sort((s,t)=>s.change-t.change).filter(s=>s.change<0)}),p=C(()=>h.totalProfit),l=C(()=>{const o=h.holdFunds.reduce((s,t)=>s+(t.costPrice||0)*(t.holdShare||0),0);return o?(parseFloat(p.value)/o*100).toFixed(2):0}),D=o=>{F.push({name:"FundDetail",params:{code:o.code}})},E=o=>{a.value=o},T=o=>o===0?"bg-primary text-white":o===1?"bg-gray-200":"bg-gray-100";return j(()=>{i.value=P(),setTimeout(()=>{c.value.forEach((o,s)=>{w(`indexChart_${s}`,o.trend,o.change>=0?"#F53F3F":"#00B42A")})},500)}),(o,s)=>(d(),u("div",H,[e("div",L,[s[2]||(s[2]=e("h2",{class:"text-lg font-bold mb-3"},"市场指数",-1)),e("div",N,[(d(!0),u(y,null,_(c.value,(t,g)=>(d(),u("div",{key:g,class:"bg-white rounded-lg p-3 card-shadow hover-scale index-card"},[e("div",V,[e("div",null,[e("p",q,n(t.name),1),e("h3",G,n(x(S)(t.value)),1)]),e("span",{class:b(["px-1.5 py-0.5 rounded-full text-xs font-medium",x(B)(t.change)])},n(t.change>=0?"+":"")+n(t.change)+"% ",3)]),e("div",I,[e("canvas",{id:"indexChart_"+g},null,8,J)])]))),128)),e("div",K,[e("div",O,[e("div",null,[s[0]||(s[0]=e("p",{class:"text-neutral text-xs"},"今日预估收益",-1)),e("h3",Q,n(x($)(p.value)),1)]),e("span",{class:b(["px-1.5 py-0.5 rounded-full text-xs font-medium",x(B)(l.value)])},n(l.value>=0?"+":"")+n(l.value)+"% ",3)]),e("div",U,[s[1]||(s[1]=e("i",{class:"fa fa-clock-o mr-1"},null,-1)),e("span",null,"数据更新于: "+n(i.value),1)])])])]),e("div",X,[e("div",Y,[s[3]||(s[3]=e("h2",{class:"text-lg font-bold"},"基金排行榜",-1)),e("div",Z,[(d(),u(y,null,_(f,t=>e("button",{key:t.id,class:b(["rank-tab text-sm px-3 py-1 rounded transition-colors",a.value===t.id?"tab-active":"tab-inactive"]),onClick:g=>E(t.id)},n(t.name),11,ee)),64))])]),e("div",te,[(d(!0),u(y,null,_(m.value,(t,g)=>(d(),u("div",{key:t.code,class:"flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer fund-item transition-colors hover-scale",onClick:ce=>D(t)},[e("span",{class:b(["w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold mr-3",T(g)])},n(g+1),3),e("div",ae,[e("div",ne,[e("h3",oe,n(t.name),1),e("span",{class:b([x(W)(t.change),"font-medium text-sm"])},n(t.change>=0?"+":"")+n(t.change)+"% ",3)]),e("p",re,n(t.code)+" | "+n(t.type)+" | 净值: "+n(t.nav),1)])],8,se))),128))])]),e("div",le,[s[4]||(s[4]=e("h2",{class:"text-lg font-bold mb-4"},"热门基金分类",-1)),e("div",ie,[(d(),u(y,null,_(v,t=>e("button",{key:t,class:"py-2 text-center border border-gray-200 rounded-lg hover:border-primary hover:text-primary transition-colors text-sm"},n(t),1)),64))])])]))}};export{ge as default};
